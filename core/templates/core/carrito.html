{% extends "core/base.html" %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'core/css/carrito.css' %}">
{% endblock %}

{% block section_title %} Carrito {% endblock %}
{% block content %}

{% if carrito_productos %}
  <h2>Productos en tu carrito:</h2>
  <ul>
    {% for carrito_item in carrito_productos %}
      {% for producto in carrito_item.productos.all %}
        <li>
          <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}">
          <div>
            <h2>{{ producto.nombre }}</h2>
            <p>Precio: ${{ producto.precio }}</p>
            <form method="POST" action="{% url 'eliminar_producto_carrito' producto.id %}">
              {% csrf_token %}
              <button type="submit">Eliminar</button>
            </form>
          </div>
        </li>
      {% endfor %}
    {% endfor %}
  </ul>

  <div class="total-price">
    <p>Precio total de la carrito: ${{ precio_total }}</p>
  </div>

  <br>
  <a href="{% url 'enviar_pedido' %}" style="color: blue;" class="confirm-button">Confirmar y proceder al envío</a>

    
  {% else %}
    <p class="empty-message">Todavía no has agregado productos al carrito.</p>
{% endif %}

{% endblock %}